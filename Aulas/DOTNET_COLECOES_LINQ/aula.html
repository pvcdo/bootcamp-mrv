<h1>Fundamentos de Coleções e LINQ com .NET</h1>

<p>Professor Leonardo Buta</p>

<ul>
    <li><a href="https://www.linkedin.com/in/leonardo-buta/">Linkedin</a></li>
    <li><a href="https://github.com/leonardo-buta">github</a></li>
</ul>

<a href="">Documentação</a> sobre coleções da Microsoft.

<h2>Arrays</h2>

<p>Array é um conjunto de dados que armazena valores do mesmo tipo, com um tamnho fixo.</p>

<p>Há algumas formas de declarar um array</p>

<ul>
    <li>
        int[] array = new int[4];
        <p>Um array de inteiros que só pode ter 4 elementos</p>
    </li>
    <li>
        int[] array = new int[]{42,75,74,61};
        <p>Automataticamente o array que não tem tamanho, pode ter seu limite indicado pelo número de valores que foram passados na inicialização</p>
    </li>
    <li>
        string[] nomes = {"Jan", "Fev"};
    </li>
    <li>
        int[,] matriz = new int[4,2];
        <p>Array com 4 linhas e 2 colunas</p>
    </li>
</ul>

<p>Não pode modificar o tamanho do array depois que ele foi declarado.</p>

<h3>Percorrendo um array</h3>

<p>Para percorrer um array nós podemos usar o comando for ou foreach</p>

<h3>Debbugando código</h3>

<p>No vscode é possível fazer o debug de um código, para isso dentro do programa que queremos debugar apertamos a tecla f5, após ter escolhido os breakpoints. Se necessário, temos que fazer algumas alterações no launch.json que abre na pasta .vscode, irmã da pasta raiz do projeto.</p>

<h3>Acessando um array de forma segura</h3>

<p>Ao tentar passar um tipo que não é o certo no array haverá um erro, assim como se tentarmos ler ou modificar um índice que não existe, ou seja, que seja maior que o tamanho do array.</p>

<h3>Array multidimensional ou matriz</h3>

<p>Para percorrer um array muldidimensional nós temos que passar um for dentro do outro. O primeiro percorre as linhas e o segundo as colunas. Temos que executar o método GetLength(a) para determinar o alcance do for, sendo a = 0 para linha e a = 1 para colunas.</p>

<h3>Ordenando arrays</h3>

<p>Existem diversos algoritmos de ordenação, como podemos ver <a href="https://en.wikipedia.org/wiki/Sorting_algorithm">neste artigo</a> da wikipédia, sendo que cada um tem sua complexidade e melhor situação de uso.</p>

<p>O Bubble sort é usado para pequenos arrays. É um algoritimo de comparação. Ele vai fazendo trocas entre os pares imediatos de itens até estabelecer a última posição não ordenada.</p>

<p>O site <a href="https://visualgo.net/en/sorting">VisuAlgo</a> possui explicações exemplificadas sobre alguns algoritmos de ordenação.</p>

<h4>Bubble sort</h4>

<p>O número de ciclos de comparações será igual ao número de itens do array. Ou seja, se o array tem 5 itens, nós vamos fazer 5 vezes a comparação entre cada um dos itens.</p>

<h2>Impressão de um array</h2>

<p> O professor usou o seguinte código para imprimir o array de uma forma mais palatável:
    <pre>
        var linha = string.Join(", ", array);
        System.Console.WriteLine(linha);
    </pre>
</p>

<p>Quero ver o que acontece quando damos apenas um System.Console.WriteLine(array)</p>

<h3>Classe Array</h3>

<p>É uma classe nativa do System que oferece diversos métodos e atributos de um array. Como por exemplo a ordenação.</p>

<p>Para utilizá-la, temos que estar usando o namespace System.</p>

<p>Um dos métodos é o Array.Sort(array_que_queremos_trabalhar).</p>

<p></p>

<h2>System.Console.WriteLine</h2>

<p>Interessante notar que ao dar o comando System.Console.WriteLine("Este código {0}", variável), o {0} será substituído pelo valor da variável na saída do texto no console.</p>

<h2>Coleções genéricas (lista)</h2>

<p>Uma coleção do c# parecida com array, só que de alto nível, ou seja, sem termos que nos preocupar com algumas nuances de um Array.</p>

<p>Uma coleção genérica tem tamanhos dinâmicos.</p>

<p>A lista e outros tipos de coleção genérica fica no espaço System.Collections.Generic.</p>

<p>O primeiro item de uma lista também é o 0.</p>

<h3>Declaração</h3>

<p>Para declarar uma lista nós temos que dar um ""using System.Collections.Generic"" e no corpo do código o comando ""List&lt;tipo_lista&gt; nome_lista = new List&lt;tipo_lista&gt;()"". Os tipos da lista podem ser string, double, int, etc.</p>

<h3>Métodos</h3>

<p>Detalhados no <a href="../../DOTNET_COLECOES_LINQ/README.html">README.html</a> da prática a aula.</p>

<h2>Coleções específicas</h2>

<p>Implementam regras para sua ordem de acesso e manipulação de seus elementos. Duas dessas coleções são a Queue (fila) e Stack (pilha), aquela obedece à ordem FIFO (First In, First Out), esta à LIFO (Last In, First Out).</p>

<h3>Queue - Declaração</h3>

<p>Assim como a List, para declarar uma Queue nós temos que dar um ""using System.Collections.Generic"" e no corpo do código o comando ""Queue&lt;tipo_queue&gt; nome_queue = new Queue&lt;tipo_queue&gt;()"". Os tipos da queue podem ser string, double, int, etc.</p>

<img src="img/fila.PNG" alt="">

<h3>Queue - Métodos</h3>

<ul>
    <li>
        nome_queue.Enqueue
        <p>Adiciona um elemento no fim da fila</p>
    </li>
    <li>
        nome_queue.Dequeue
        <p>Remove e retorna o objeto atual no começo da fila.</p>
    </li>
    <li>
        nome_queue.Peek
        <p>Retorna o objeto do começo da fila</p>
    </li>
    <li>
        nome_queue.Count
        <p>Retorna o número de elementos que está na fila.</p>
    </li>
</ul>

<h4>Percorrer a fila</h4>

<p>Usamos while e dentro dele os comandos de Dequeue e Peek.</p>

<h3>Stack - Declaração</h3>

<p>Assim como a List, para declarar uma Stack nós temos que dar um ""using System.Collections.Generic"" e no corpo do código o comando ""Stack&lt;tipo_stack&gt; nome_stack = new Stack&lt;tipo_stack&gt;()"". Os tipos da stack podem ser string, double, int, etc.</p>

<img src="img/pilha.PNG" alt="">

<h3>Stack - Métodos</h3>

<ul>
    <li>
        nome_stack.Push
        <p>Adiciona um elemento no topo (fim) da fila</p>
    </li>
    <li>
        nome_stack.Pop
        <p>Remove e retorna o objeto do topo (fim) da fila.</p>
    </li>
    <li>
        nome_stack.Peek
        <p>Retorna o objeto do topo (fim) da fila</p>
    </li>
    <li>
        nome_stack.Count
        <p>Retorna o número de elementos que está na pilha.</p>
    </li>
</ul>

<h4>Percorrer a pilha</h4>

<p>Usamos while e dentro dele os comandos de Pop e Peek.</p>

<h3>Dicionários</h3>

<p>É uma coleção para armazenar onde se armazena uma chave e um valor. O dicionário armazena a chave em hash.</p>
<p>Não é permitido ter chaves repetidas.</p>

<h3>Declaração</h3>

<p>Dictionary&lt;tipo_chave,tipo_valor&gt; nome_dicionario = new <p>Dictionary&lt;tipo_chave,tipo_valor&gt;();</p>

<h3>Métodos</h3>

<h4>Adicionar itens</h4>

<p>Podemos inicializar com valores, provavelmente igual nas outras coleções</p>

<p>Podemos usar tambem o método nome_dicionario.Add(chave,valor)</p>

<h4>Percorrendo dictionary</h4>

<pre>
    foreach(KeyValuePair&lt;tipo_chave,tipo_valor&gt; item in nome_dicionario)
    {
        System.Console.WriteLine($"chave: {item.Key}, valor: {item.Value}"); 
    }
</pre>

<p>O código do foreach acima indica que o item é um conjunto chave-valor, sendo que podemos acessar cada um deles a partir do atributo respectivo (Key para chave e Value para valor) passado à referência do par (no caso item).</p>

<h4>Manipulando valores</h4>

<ul>
    <li>Retornar um valor
        <p>nome_dicionario[chave]</p>
    </li>
    <li>Atualizar um valor
        <p>nome_dicionario[chave] = valor</p>
    </li>
    <li>Remover um valor
        <p>nome_dicionario.Remove(chave)</p>
        <p>Obviamente tanto o valor quanto a chave são removidos.</p>
    </li>
</ul>

<h4>Acesso de maneira segura</h4>

<p>Quando tentamos acessar de maneira simples uma chave que não existe no dictionary o código quebra. Para evitar isso e fazer acessos de maneira segura usamos o método TryGetValue()</p>

<pre>
    if(nome_dicionario.TryGetValue(chave_procurada, out tipo_valor variavel_valor)
    {
        System.Console.WriteLine(variavel_valor);
    }else
    {
        System.Console.WriteLine("Chave não encontrada");
    }
</pre>

<p>O método TryGetValue retorna um booleano e em caso de true ele vai permitir manipular a variavel_valor, que vai armazenar o valor que está associado à chave procurada e encontrada no dicionário.</p>

<h2>Operações LINQ</h2>

<p>Language-Integrated Query (consulta integrada à linguagem). É uma maneira de utilizar sintaxe de consulta padronizada para coleções de objetos.</p>

<p>Pode se integrar a qualquer tipo de coleção.</p>

<p>Para utilizá-la nós temos que dar using System.Linq</p>

<img src="img/LINQ.PNG" alt="">

<p>Nos exemplos da imagem os retornos seram armazenados em listas de nomes numQuery1 e numQuery2. <span style="color: red;">O orderby da segundo exemplo está errado, o certo seria ""num"" ao invés de ""n"".</span></p>

<h3>Valores mínimo, máximo e médio</h3>

<ul>
    <li>mínimo
        nome_colecao.Min();
    </li>
    <li>máximo
        nome_colecao.Max();
    </li>
    <li>média
        nome_colecao.Average();
    </li>
</ul>

<h3>Sum e Distinct</h3>

<h4>Sum</h4>

<p>nome_colecao.Sum()</p>
<p>Retorna a soma dos elementos da coleção.</p>

<h4>Distinct</h4>

<p>nome_colecao.Distinct().ToColeção()</p>
<p>Retorna uma coleção contendo os mesmo valores que a original, porém sem repetição de valores, caso haja na original.</p>
<p>O ToColeção deve ser substituído por ToArray, ToList, ou o que mais fizer sentido para a aplicação.</p>